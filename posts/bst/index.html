<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#494f5c">
	<meta name="msapplication-TileColor" content="#494f5c">
<meta itemprop="name" content="BST">
<meta itemprop="description" content="下面是基于C&#43;&#43;的BST类实现 // // main.cpp // debugger // // Created by 丁保荣 on 2018/6/6. // Copyright © 2018 丁保荣. All rights reserved. // #include&lt;iostream&gt; using namespace std; struct node { node * p; node * l; node * r; int key; }; class BST { public: node * root; node mynil; void">
<meta itemprop="datePublished" content="2018-06-07T15:09:17&#43;08:00" />
<meta itemprop="dateModified" content="2018-06-07T15:09:17&#43;08:00" />
<meta itemprop="wordCount" content="846">



<meta itemprop="keywords" content="untagged," /><meta property="og:title" content="BST" />
<meta property="og:description" content="下面是基于C&#43;&#43;的BST类实现 // // main.cpp // debugger // // Created by 丁保荣 on 2018/6/6. // Copyright © 2018 丁保荣. All rights reserved. // #include&lt;iostream&gt; using namespace std; struct node { node * p; node * l; node * r; int key; }; class BST { public: node * root; node mynil; void" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ricky-ting.github.io/posts/bst/" />
<meta property="article:published_time" content="2018-06-07T15:09:17+08:00" />
<meta property="article:modified_time" content="2018-06-07T15:09:17+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="BST"/>
<meta name="twitter:description" content="下面是基于C&#43;&#43;的BST类实现 // // main.cpp // debugger // // Created by 丁保荣 on 2018/6/6. // Copyright © 2018 丁保荣. All rights reserved. // #include&lt;iostream&gt; using namespace std; struct node { node * p; node * l; node * r; int key; }; class BST { public: node * root; node mynil; void"/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>BST</title>
	<link rel="stylesheet" href="https://ricky-ting.github.io/css/style.min.657bcb7af31123e4156b1a3d2ff60a636717e54ead74f882136b5114cf72b55e.css" integrity="sha256-ZXvLevMRI+QVaxo9L/YKY2cX5U6tdPiCE2tRFM9ytV4=" crossorigin="anonymous">
	
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp faster">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://ricky-ting.github.io">Ricky Ting&#39;s Blog</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="https://ricky-ting.github.io/posts/">Posts</a>
				<a href="https://ricky-ting.github.io/notes/">Notes</a>
				<a href="https://ricky-ting.github.io/slides/">Slides</a>
				<a href="https://ricky-ting.github.io/about-hugo/">About</a>
				<a href="https://ricky-ting.github.io/links/">Links</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<button id="toc-btn" class="hdr-btn desktop-only-ib" title=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3" y2="6"></line><line x1="3" y1="12" x2="3" y2="12"></line><line x1="3" y1="18" x2="3" y2="18"></line></svg></button><span class="hdr-social hide-in-mobile"><a href="https://github.com/Ricky-Ting/" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://ricky-ting.github.io/posts/">Posts</a></li>
			<li><a href="https://ricky-ting.github.io/notes/">Notes</a></li>
			<li><a href="https://ricky-ting.github.io/slides/">Slides</a></li>
			<li><a href="https://ricky-ting.github.io/about-hugo/">About</a></li>
			<li><a href="https://ricky-ting.github.io/links/">Links</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Jun 7, 2018</span></div>
				<h1>BST</h1>
			</header>
			<div class="content">
				<p>下面是基于C++的BST类实现</p>
<!-- raw HTML omitted -->
<pre><code>//
//  main.cpp
//  debugger
//
//  Created by 丁保荣 on 2018/6/6.
//  Copyright © 2018 丁保荣. All rights reserved.
//

#include&lt;iostream&gt;
using namespace std;
struct node
{
    node * p;
    node * l;
    node * r;
    int key;
};

class BST
{
public:
    node * root;
    node mynil;
    void Initial()
    {
        root=&amp;mynil;
    }
    void Inorder_tree_walk(node * x);
    void Preorder_tree_walk(node * x);
    void Postorder_tree_walk(node * x);
    node * Search(node * x, int k);
    node * Minimum(node * z);
    node * Maximum(node * z);
    node * Successor(node * x);
    node * Predecessor(node * x);
    void Insert(node * z);
    void Transplant(node * u, node * v);
    void Delete(node * z);
    
private:
    
};

void BST::Inorder_tree_walk(node * x)
{
    if(x!=&amp;mynil)
    {
        BST::Inorder_tree_walk((*x).l);
        cout&lt;&lt;(*x).key;
        BST::Inorder_tree_walk((*x).r);
    }
}

void BST::Preorder_tree_walk(node * x)
{
    if(x!=&amp;mynil)
    {
        cout&lt;&lt;(*x).key;
        BST::Preorder_tree_walk((*x).l);
        BST::Preorder_tree_walk((*x).r);
    }
}

void BST::Postorder_tree_walk(node * x)
{
    if(x!=&amp;mynil)
    {
        BST::Postorder_tree_walk((*x).l);
        BST::Postorder_tree_walk((*x).r);
        cout&lt;&lt;(*x).key;
    }
}

node * BST::Search(node * x,int k)
{
    if(x==&amp;mynil || k==(*x).key)
        return x;
    if(k&lt;(*x).key)
        return BST::Search((*x).l,k);
    else
        return BST::Search((*x).r,k);
}

node * BST::Minimum(node * z)
{
    while((*z).l!=&amp;mynil)
        z=(*z).l;
    return z;
}

node * BST::Maximum(node * z)
{
    while((*z).r!=&amp;mynil)
        z=(*z).r;
    return z;
}

node * BST::Successor(node * x)
{
    if((*x).r!=&amp;mynil)
        return BST::Minimum((*x).r);
    node * y=(*x).p;
    while(y!=&amp;mynil &amp;&amp; x==(*y).r)
    {
        x=y;
        y=(*y).p;
    }
    return y;
}

node * BST::Predecessor(node * x)
{
    if((*x).l!=&amp;mynil)
        return BST::Maximum((*x).l);
    node * y=(*x).p;
    while(y!=&amp;mynil &amp;&amp; x==(*y).l)
    {
        x=y;
        y=(*y).p;
    }
    return y;
}

void BST::Insert(node * z)
{
    node * y=&amp;mynil;
    node * x=root;
    while(x!=&amp;mynil)
    {
        y=x;
        if((*z).key&lt;(*x).key)
            x=(*x).l;
        else
            x=(*x).r;
    }
    (*z).p=y;
    if(y==&amp;mynil)
        root=z;
    else if((*z).key&lt;(*y).key)
        (*y).l=z;
    else
        (*y).r=z;
}

void BST::Transplant(node * u, node * v)
{
    if((*u).p==&amp;mynil)
        root=v;
    else if(u==(*(*u).p).l)
        (*(*u).p).l=v;
    else
        (*(*u).p).r=v;
    if(v!=&amp;mynil)
        (*v).p=(*u).p;
}
void BST::Delete(node * z)
{
    node * y;
    if((*z).l==&amp;mynil)
        BST::Transplant(z,(*z).r);
    else if((*z).r==&amp;mynil)
        BST::Transplant(z,(*z).l);
    else
    {
        y=BST::Minimum((*z).r);
        if((*y).p!=z)
        {
            BST::Transplant(y,(*y).r);
            (*y).r=(*z).r;
            (*(*y).r).p=y;
        }
        BST::Transplant(z,y);
        (*y).l=(*z).l;
        (*(*y).l).p=y;
        
    }
}

BST T;

void myinsert(int key)
{
    node * p=new node;
    (*p).key=key;
    p-&gt;l=&amp;T.mynil;
    p-&gt;r=&amp;T.mynil;
    T.Insert(p);
}

void mydelete(int key)
{
    node * p = T.Search(T.root,key);
    T.Delete(p);
    delete(p);
}
</code></pre><p>以下是基于C++的RB-Tree类实现</p>
<pre><code>//
//  main.cpp
//  debugger
//
//  Created by 丁保荣 on 2018/6/6.
//  Copyright © 2018 丁保荣. All rights reserved.
//
#include&lt;iostream&gt;
using namespace std;
int counter=0;
struct node
{
    bool c; // true is black and false is red.
    int key;
    node * p;
    node * l;
    node * r;
};
class myRB_Tree
{
public:
    node mynil;
    node * root;
    void Initial()
    {
        mynil.c=true;
        mynil.p=mynil.l=mynil.r=NULL;
        mynil.key=-1;
        root=&amp;mynil;
    }
    void Insert(node * z);
    void Delete(node * z);
    node * Search(node * x, int k);
    node * Minimum(node * z);
    void Preorder_tree_walk(node * x);
    
private:
    void Insert_Fixup(node * z);
    void Transplant(node * u, node * v);
    void Left_Rotate(node * x);
    void Right_Rotate(node * x);
    void Delete_Fixup(node * x);
};


void myRB_Tree::Preorder_tree_walk(node * x)
{
    if(x!=&amp;mynil)
    {
        cout&lt;&lt;(*x).key&lt;&lt;&quot;:&quot;&lt;&lt;((*x).c?&quot;black&quot;:&quot;red&quot;)&lt;&lt;endl;
        myRB_Tree::Preorder_tree_walk((*x).l);
        myRB_Tree::Preorder_tree_walk((*x).r);
    }
}



void myRB_Tree::Insert(node * z)
{
    node * y=&amp;mynil;
    node * x=root;
    while(x!=&amp;mynil)
    {
        y=x;
        if((*z).key&lt;(*x).key)
            x=(*x).l;
        else
            x=(*x).r;
    }
    (*z).p=y;
    if(y==&amp;mynil)
        root=z;
    else if((*z).key&lt;(*y).key)
        (*y).l=z;
    else
        (*y).r=z;
    (*z).l=&amp;mynil;
    (*z).r=&amp;mynil;
    (*z).c=0;
    myRB_Tree::Insert_Fixup(z);
}

void myRB_Tree::Insert_Fixup(node * z)
{
    while((*(*z).p).c==false)
    {
        if((*z).p==(*(*(*z).p).p).l)
        {
            node * y=(*(*(*z).p).p).r;
            if((*y).c==false)
            {
                (*(*z).p).c=true;
                (*y).c=true;
                (*(*(*z).p).p).c=false;
                z=(*(*z).p).p;
            }
            else
            {
                if(z==(*(*z).p).r)
                {
                    z=(*z).p;
                    myRB_Tree::Left_Rotate(z);
                }
                (*(*z).p).c=true;
                (*(*(*z).p).p).c=false;
                myRB_Tree::Right_Rotate((*(*z).p).p);
            }
            
        }
        else
        {
            node * y=(*(*(*z).p).p).l;
            if((*y).c==false)
            {
                (*(*z).p).c=true;
                (*y).c=true;
                (*(*(*z).p).p).c=false;
                z=(*(*z).p).p;
            }
            else
            {
                if(z==(*(*z).p).l)
                {
                    z=(*z).p;
                    myRB_Tree::Right_Rotate(z);
                }
                (*(*z).p).c=true;
                (*(*(*z).p).p).c=false;
                myRB_Tree::Left_Rotate((*(*z).p).p);
            }
        }
    }
    (*root).c=true;
}


void myRB_Tree::Left_Rotate(node * x)
{
    node * y= (*x).r;
    (*x).r=(*y).l;
    if((*y).l!=&amp;mynil)
        (*(*y).l).p=x;
    (*y).p=(*x).p;
    if((*x).p==&amp;mynil)
        root=y;
    else if(x==(*(*x).p).l)
        (*(*x).p).l=y;
    else
        (*(*x).p).r=y;
    (*y).l=x;
    (*x).p=y;
}

void myRB_Tree::Right_Rotate(node * x)
{
    node * y= (*x).l;
    (*x).l=(*y).r;
    if((*y).r!=&amp;mynil)
        (*(*y).r).p=x;
    (*y).p=(*x).p;
    if((*x).p==&amp;mynil)
        root=y;
    else if(x==(*(*x).p).r)
        (*(*x).p).r=y;
    else
        (*(*x).p).l=y;
    (*y).r=x;
    (*x).p=y;
}

void myRB_Tree::Transplant(node * u, node * v)
{
    if((*u).p==&amp;mynil)
        root=v;
    else if(u==(*(*u).p).l)
        (*(*u).p).l=v;
    else
        (*(*u).p).r=v;
    (*v).p=(*u).p;
}

void myRB_Tree::Delete(node * z)
{
    node * y=z;
    node * x;
    bool y_original_color=(*y).c;
    if((*z).l==&amp;mynil)
    {
        x=(*z).r;
        myRB_Tree::Transplant(z,(*z).r);
    }
    else if((*z).r==&amp;mynil)
    {
        x=(*z).l;
        myRB_Tree::Transplant(z,(*z).l);
    }
    else
    {
        y=myRB_Tree::Minimum((*z).r);
        y_original_color=(*y).c;
        x=(*y).r;
        if((*y).p==z)
            (*x).p=y;
        else
        {
            myRB_Tree::Transplant(y,(*y).r);
            (*y).r=(*z).r;
            (*(*y).r).p=y;
        }
        myRB_Tree::Transplant(z,y);
        (*y).l=(*z).l;
        (*(*y).l).p=y;
        (*y).c=(*z).c;
    }
    if(y_original_color==true)
        myRB_Tree::Delete_Fixup(x);
}

void myRB_Tree::Delete_Fixup(node * x)
{
    node * w;
    while(x!=root and (*x).c==true)
    {
        if(x==(*(*x).p).l)
        {
            w=(*(*x).p).r;
            if((*w).c==false)
            {
                (*w).c=true;
                (*(*x).p).c=false;
                myRB_Tree::Right_Rotate((*x).p);
                w=(*(*x).p).r;
            }
            if((*(*w).l).c==true &amp;&amp; (*(*w).r).c==true)
            {
                (*w).c=false;
                x=(*x).p;
            }
            else
            {
                if((*(*w).r).c==true)
                {
                    (*(*w).l).c=true;
                    (*w).c=false;
                    myRB_Tree::Left_Rotate(w);
                    w=(*(*x).p).r;
                }
                (*w).c=(*(*x).p).c;
                (*(*x).p).c=true;
                (*(*w).r).c=true;
                myRB_Tree::Right_Rotate((*x).p);
                x=root;
            }
        }
        else
        {
            w=(*(*x).p).l;
            if((*w).c==false)
            {
                (*w).c=true;
                (*(*x).p).c=false;
                myRB_Tree::Right_Rotate((*x).p);
                w=(*(*x).p).l;
            }
            if((*(*w).r).c==true &amp;&amp; (*(*w).l).c==true)
            {
                (*w).c=false;
                x=(*x).p;
            }
            else
            {
                if((*(*w).l).c==true)
                {
                    (*(*w).r).c=true;
                    (*w).c=false;
                    myRB_Tree::Left_Rotate(w);
                    w=(*(*x).p).l;
                }
                (*w).c=(*(*x).p).c;
                (*(*x).p).c=true;
                (*(*w).l).c=true;
                myRB_Tree::Right_Rotate((*x).p);
                x=root;
            }
        }
    }
}

node * myRB_Tree::Minimum(node * z)
{
    while((*z).l!=&amp;mynil)
        z=(*z).l;
    return z;
}

node * myRB_Tree::Search(node * x,int k)
{
    if(x==&amp;mynil || k==(*x).key)
        return x;
    if(k&lt;(*x).key)
    {
        counter++;
        return myRB_Tree::Search((*x).l,k);
    }
    else
    {
        counter++;
        return myRB_Tree::Search((*x).r,k);
    }
}
myRB_Tree T;
void myinsert(int key)
{
    node * p=new node;
    (*p).key=key;
    p-&gt;l=&amp;T.mynil;
    p-&gt;r=&amp;T.mynil;
    T.Insert(p);
}

void mydelete(int key)
{
    node * p = T.Search(T.root,key);
    T.Delete(p);
    delete(p);
}
</code></pre>
			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://ricky-ting.github.io/tags/untagged">untagged</a></span>
				</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg></p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2018-06-07 15:09 &#43;0800</p>
			</footer>
		</article>
		<aside id="toc">
			<div class="toc-title"></div>
			<nav id="TableOfContents"></nav>
		</aside>
		<div class="post-nav thin">
			<a class="next-post" href="https://ricky-ting.github.io/posts/shared-folder-in-virtual-machine/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;</span><br><span>shared folder in virtual machine</span>
			</a>
		</div>
		<div id="comments" class="thin">
</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2020 <a href="https://ricky-ting.github.io">Ricky Ting</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://ricky-ting.github.io/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>



	<script src="https://ricky-ting.github.io/js/bundle.min.4a9a0ac3d2217822c7865b4161e6c2a71de1d70492264337755427898dd718f6.js" integrity="sha256-SpoKw9IheCLHhltBYebCpx3h1wSSJkM3dVQniY3XGPY=" crossorigin="anonymous"></script>
	

</body>

</html>
